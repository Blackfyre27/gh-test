name: GitHub Issues Test
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    env:
         GH_TOKEN: ${{ github.token }}
    steps:
      - name: Get all issues from the repository -  GH-TEST
        run: |
               # GitHub CLI api
               # https://cli.github.com/manual/gh_api
                 gh api \
                 -H "Accept: application/vnd.github+json" \
                 /repos/Blackfyre27/gh-test/issues  --template \
                 '{{range .}}{{.id}}: [{{"\n"}}{Number: {{.number}},{{"\n"}}Title: ''"{{.title}}"'', {{"\n"}}Labels: ''{{.labels | pluck "name"}}'',{{"\n"}}Assignee:''"{{.assignee.login}}"'',{{"\n"}}State:''"{{.state}}"'',{{"\n"}}URL:''"{{.html_url}}"''}],{{"\n"}}{{end}}''}'
      
      - name: GitHub Script
        uses: actions/github-script@v6
        with:
          script: |
                   let query = "mutation { create_item (board_id: 3688894632, group_id: \"topics\", item_name: \"new item\") { id }}";

                    fetch ("https://api.monday.com/v2", {
                      method: 'post',
                      headers: {
                        'Content-Type': 'application/json',
                        'Authorization' : 'eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjIxNDU1MzE2NywidWlkIjozNzQ3NzQyNSwiaWFkIjoiMjAyMi0xMi0yOVQwNjoyOTozMy4wNjJaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTQ1MTg5MDEsInJnbiI6InVzZTEifQ.4YqSJlQLAFyBbd4nfU2mbInZ38ntoS_AU8zlJQAGVBs'
                       },
                       body: JSON.stringify({
                         query : query
                       })
                      })
                       .then(res => res.json())
                       .then(res => console.log(JSON.stringify(res, null, 2)));
                     


